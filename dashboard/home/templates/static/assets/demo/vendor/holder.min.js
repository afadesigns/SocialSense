/*!
Holder - client side image placeholders
Version 2.9.4+cabil
Â© 2016 Ivan Malopinsky - http://imsky.co
Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT
*/

(function (window) {
  'use strict';

  // Check if the browser supports certain features
  var supportsCanvas = !!window.CanvasRenderingContext2D;
  var supportsSVG = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;

  // Default settings
  var defaults = {
    size: 10,
    units: 'pt',
    scale: 1 / 16
  };

  // Holder function
  function Holder(options) {
    this.settings = Object.assign({}, defaults, options);
    this.elements = [];
  }

  Holder.prototype.add = function (element) {
    this.elements.push(element);
  };

  Holder.prototype.render = function () {
    if (!supportsCanvas && !supportsSVG) {
      throw new Error('Your browser does not support canvas or SVG');
    }

    this.elements.forEach(function (element) {
      var placeholder = document.createElement('div');
      placeholder.className = 'holder';
      placeholder.style.width = element.offsetWidth + 'px';
      placeholder.style.height = element.offsetHeight + 'px';
      element.parentNode.insertBefore(placeholder, element);
      element.style.visibility = 'hidden';
    });
  };

  // Export Holder function
  window.Holder = Holder;

})(window);
